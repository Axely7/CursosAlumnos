#pragma checksum "C:\Users\AxelEduardo\Documents\Software learning\BlazorCursoUdemy\BlazorServer\Pages\ListaCursos.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "4e8c1cd71efd82e7e981c8ded7fc9b0f934173e8"
// <auto-generated/>
#pragma warning disable 1591
namespace BlazorServer.Pages
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "C:\Users\AxelEduardo\Documents\Software learning\BlazorCursoUdemy\BlazorServer\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\AxelEduardo\Documents\Software learning\BlazorCursoUdemy\BlazorServer\_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\AxelEduardo\Documents\Software learning\BlazorCursoUdemy\BlazorServer\_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\AxelEduardo\Documents\Software learning\BlazorCursoUdemy\BlazorServer\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\AxelEduardo\Documents\Software learning\BlazorCursoUdemy\BlazorServer\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Users\AxelEduardo\Documents\Software learning\BlazorCursoUdemy\BlazorServer\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Users\AxelEduardo\Documents\Software learning\BlazorCursoUdemy\BlazorServer\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Users\AxelEduardo\Documents\Software learning\BlazorCursoUdemy\BlazorServer\_Imports.razor"
using BlazorServer;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "C:\Users\AxelEduardo\Documents\Software learning\BlazorCursoUdemy\BlazorServer\_Imports.razor"
using BlazorServer.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "C:\Users\AxelEduardo\Documents\Software learning\BlazorCursoUdemy\BlazorServer\_Imports.razor"
using System.IO;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "C:\Users\AxelEduardo\Documents\Software learning\BlazorCursoUdemy\BlazorServer\_Imports.razor"
using BlazorInputFile;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\AxelEduardo\Documents\Software learning\BlazorCursoUdemy\BlazorServer\Pages\ListaCursos.razor"
using BlazorServer.Servicios;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\AxelEduardo\Documents\Software learning\BlazorCursoUdemy\BlazorServer\Pages\ListaCursos.razor"
using ModeloClasesAlumnos;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Users\AxelEduardo\Documents\Software learning\BlazorCursoUdemy\BlazorServer\Pages\ListaCursos.razor"
           [Authorize]

#line default
#line hidden
#nullable disable
    [Microsoft.AspNetCore.Components.RouteAttribute("/ListaCursos")]
    public partial class ListaCursos : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.AddMarkupContent(0, "<h3>Lista Cursos</h3>\r\n\r\n");
            __builder.AddMarkupContent(1, "<div class=\"form-group row\">\r\n    <div class=\"col-sm-10\">\r\n        <a href=\"/NuevoCurso\" class=\"btn btn-primary m-1\">Nuevo Curso</a>\r\n    </div>\r\n</div>\r\n\r\n\r\n");
#nullable restore
#line 18 "C:\Users\AxelEduardo\Documents\Software learning\BlazorCursoUdemy\BlazorServer\Pages\ListaCursos.razor"
 if (listaCursos == null)
{

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(2, "    <div class=\"spinner\"></div>\r\n");
#nullable restore
#line 21 "C:\Users\AxelEduardo\Documents\Software learning\BlazorCursoUdemy\BlazorServer\Pages\ListaCursos.razor"
}
else if (listaCursos.Count == 0)
{

#line default
#line hidden
#nullable disable
            __builder.AddContent(3, "    ");
            __builder.AddMarkupContent(4, "<p class=\"text-danger\">No hay cursos disponibles</p>\r\n");
#nullable restore
#line 25 "C:\Users\AxelEduardo\Documents\Software learning\BlazorCursoUdemy\BlazorServer\Pages\ListaCursos.razor"
}
else
{

#line default
#line hidden
#nullable disable
            __builder.AddContent(5, "    ");
            __builder.OpenElement(6, "table");
            __builder.AddAttribute(7, "class", "table");
            __builder.AddMarkupContent(8, "\r\n        ");
            __builder.AddMarkupContent(9, @"<thead>
            <tr>
                <th><strong>Nombre Curso</strong></th>
                <th><strong>Coste</strong></th>
                <th><strong>F. Inicio Precio</strong></th>
                <th><strong>F. Fin Precio</strong></th>
            </tr>
        </thead>
        ");
            __builder.OpenElement(10, "tbody");
            __builder.AddMarkupContent(11, "\r\n");
#nullable restore
#line 38 "C:\Users\AxelEduardo\Documents\Software learning\BlazorCursoUdemy\BlazorServer\Pages\ListaCursos.razor"
             foreach (Curso c in listaCursos)
                

#line default
#line hidden
#nullable disable
#nullable restore
#line 39 "C:\Users\AxelEduardo\Documents\Software learning\BlazorCursoUdemy\BlazorServer\Pages\ListaCursos.razor"
                 foreach (Precio p in c.ListaPrecios)
                {

#line default
#line hidden
#nullable disable
            __builder.AddContent(12, "                    ");
            __builder.OpenElement(13, "tr");
            __builder.AddMarkupContent(14, "\r\n                        ");
            __builder.OpenElement(15, "td");
            __builder.AddContent(16, 
#nullable restore
#line 42 "C:\Users\AxelEduardo\Documents\Software learning\BlazorCursoUdemy\BlazorServer\Pages\ListaCursos.razor"
                             c.NombreCurso

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(17, "\r\n                        ");
            __builder.OpenElement(18, "td");
            __builder.AddAttribute(19, "class", "text-success");
            __builder.OpenElement(20, "strong");
            __builder.AddContent(21, "$");
            __builder.AddContent(22, 
#nullable restore
#line 43 "C:\Users\AxelEduardo\Documents\Software learning\BlazorCursoUdemy\BlazorServer\Pages\ListaCursos.razor"
                                                           p.Coste

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(23, "\r\n                        ");
            __builder.OpenElement(24, "td");
            __builder.AddContent(25, 
#nullable restore
#line 44 "C:\Users\AxelEduardo\Documents\Software learning\BlazorCursoUdemy\BlazorServer\Pages\ListaCursos.razor"
                             p.FechaInicio.ToString("dd/MM/yyyy")

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(26, "\r\n                        ");
            __builder.OpenElement(27, "td");
            __builder.AddContent(28, 
#nullable restore
#line 45 "C:\Users\AxelEduardo\Documents\Software learning\BlazorCursoUdemy\BlazorServer\Pages\ListaCursos.razor"
                             p.FechaFin.ToString("dd/MM/yyyy")

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(29, "\r\n                        ");
            __builder.OpenElement(30, "td");
            __builder.AddMarkupContent(31, "\r\n                            ");
            __builder.OpenElement(32, "a");
            __builder.AddAttribute(33, "href", 
#nullable restore
#line 47 "C:\Users\AxelEduardo\Documents\Software learning\BlazorCursoUdemy\BlazorServer\Pages\ListaCursos.razor"
                                       $"ModificarCurso/{c.Id}/{p.Id}"

#line default
#line hidden
#nullable disable
            );
            __builder.AddAttribute(34, "class", "btn btn-primary m-1");
            __builder.AddContent(35, "Modificar");
            __builder.CloseElement();
            __builder.AddMarkupContent(36, "\r\n                        ");
            __builder.CloseElement();
            __builder.AddMarkupContent(37, "\r\n                        ");
            __builder.OpenElement(38, "td");
            __builder.AddMarkupContent(39, "\r\n                            ");
            __builder.OpenElement(40, "input");
            __builder.AddAttribute(41, "type", "submit");
            __builder.AddAttribute(42, "class", "btn btn-danger");
            __builder.AddAttribute(43, "value", "Eliminar");
            __builder.AddAttribute(44, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 50 "C:\Users\AxelEduardo\Documents\Software learning\BlazorCursoUdemy\BlazorServer\Pages\ListaCursos.razor"
                                                                                                   (()=>Borrar(c.Id))

#line default
#line hidden
#nullable disable
            ));
            __builder.CloseElement();
            __builder.AddMarkupContent(45, "\r\n                        ");
            __builder.CloseElement();
            __builder.AddMarkupContent(46, "\r\n                    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(47, "\r\n");
#nullable restore
#line 53 "C:\Users\AxelEduardo\Documents\Software learning\BlazorCursoUdemy\BlazorServer\Pages\ListaCursos.razor"
                }

#line default
#line hidden
#nullable disable
            __builder.AddContent(48, "        ");
            __builder.CloseElement();
            __builder.AddMarkupContent(49, "\r\n\r\n    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(50, "\r\n");
#nullable restore
#line 57 "C:\Users\AxelEduardo\Documents\Software learning\BlazorCursoUdemy\BlazorServer\Pages\ListaCursos.razor"

}

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(51, "\r\n\r\n");
#nullable restore
#line 61 "C:\Users\AxelEduardo\Documents\Software learning\BlazorCursoUdemy\BlazorServer\Pages\ListaCursos.razor"
 if (MostrarPopUP)
{

#line default
#line hidden
#nullable disable
            __builder.AddContent(52, "    ");
            __builder.OpenElement(53, "div");
            __builder.AddAttribute(54, "class", "modal bg-secondary");
            __builder.AddAttribute(55, "tabindex", "-1");
            __builder.AddAttribute(56, "style", "display:block");
            __builder.AddAttribute(57, "role", "dialog");
            __builder.AddMarkupContent(58, "\r\n        ");
            __builder.OpenElement(59, "div");
            __builder.AddAttribute(60, "class", "modal-dialog modal-sm modal-notify modal-danger");
            __builder.AddMarkupContent(61, "\r\n            ");
            __builder.OpenElement(62, "div");
            __builder.AddAttribute(63, "class", "modal-content text-center");
            __builder.AddMarkupContent(64, "\r\n                ");
            __builder.OpenElement(65, "div");
            __builder.AddAttribute(66, "class", "modal-header d-flex justify-content-center bg");
            __builder.AddMarkupContent(67, "\r\n                    ");
            __builder.AddMarkupContent(68, "<h3 class=\"alert-head text-danger\">Dar de baja curso</h3>\r\n                    ");
            __builder.OpenElement(69, "button");
            __builder.AddAttribute(70, "type", "button");
            __builder.AddAttribute(71, "class", "close");
            __builder.AddAttribute(72, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 68 "C:\Users\AxelEduardo\Documents\Software learning\BlazorCursoUdemy\BlazorServer\Pages\ListaCursos.razor"
                                                                  CerrarPop

#line default
#line hidden
#nullable disable
            ));
            __builder.AddMarkupContent(73, "\r\n                        ");
            __builder.AddMarkupContent(74, "<span aria-hidden=\"true\">X</span>\r\n                    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(75, "\r\n                ");
            __builder.CloseElement();
            __builder.AddMarkupContent(76, "\r\n\r\n                ");
            __builder.OpenElement(77, "div");
            __builder.AddAttribute(78, "class", "modal-body bg-light");
            __builder.AddMarkupContent(79, "\r\n                    ");
            __builder.AddMarkupContent(80, "<strong class=\"text-danger\">Va dar de baja este curso. Si esta seguro continue. Si no cierre esta ventana</strong>\r\n                    <br><br>\r\n                    ");
            __builder.OpenElement(81, "button");
            __builder.AddAttribute(82, "type", "button");
            __builder.AddAttribute(83, "class", "btn btn-danger");
            __builder.AddAttribute(84, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 76 "C:\Users\AxelEduardo\Documents\Software learning\BlazorCursoUdemy\BlazorServer\Pages\ListaCursos.razor"
                                                                           (() => DarDeBaja(idCursoBorrar))

#line default
#line hidden
#nullable disable
            ));
            __builder.AddContent(85, "Dar de baja");
            __builder.CloseElement();
            __builder.AddMarkupContent(86, "\r\n                ");
            __builder.CloseElement();
            __builder.AddMarkupContent(87, "\r\n            ");
            __builder.CloseElement();
            __builder.AddMarkupContent(88, "\r\n\r\n        ");
            __builder.CloseElement();
            __builder.AddMarkupContent(89, "\r\n\r\n    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(90, "\r\n");
#nullable restore
#line 83 "C:\Users\AxelEduardo\Documents\Software learning\BlazorCursoUdemy\BlazorServer\Pages\ListaCursos.razor"
}

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(91, "\r\n");
#nullable restore
#line 85 "C:\Users\AxelEduardo\Documents\Software learning\BlazorCursoUdemy\BlazorServer\Pages\ListaCursos.razor"
 if (mostrarError)
{

#line default
#line hidden
#nullable disable
            __builder.AddContent(92, "    ");
            __builder.OpenElement(93, "div");
            __builder.AddAttribute(94, "class", "modal bg-secondary");
            __builder.AddAttribute(95, "tabindex", "-1");
            __builder.AddAttribute(96, "style", "display:block;");
            __builder.AddAttribute(97, "role", "dialog");
            __builder.AddMarkupContent(98, "\r\n        ");
            __builder.OpenElement(99, "div");
            __builder.AddAttribute(100, "class", "modal-dialog modal-confirm");
            __builder.AddMarkupContent(101, "\r\n            ");
            __builder.OpenElement(102, "div");
            __builder.AddAttribute(103, "class", "modal-content ");
            __builder.AddMarkupContent(104, "\r\n                ");
            __builder.OpenElement(105, "div");
            __builder.AddAttribute(106, "class", "modal-header justify-content-center bg-info");
            __builder.AddMarkupContent(107, "\r\n                    ");
            __builder.AddMarkupContent(108, "<div>\r\n                        <strong>Se produjo un error al realizar la operaci√≥n.</strong>\r\n                    </div>\r\n                    ");
            __builder.OpenElement(109, "button");
            __builder.AddAttribute(110, "type", "button");
            __builder.AddAttribute(111, "class", "close");
            __builder.AddAttribute(112, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 95 "C:\Users\AxelEduardo\Documents\Software learning\BlazorCursoUdemy\BlazorServer\Pages\ListaCursos.razor"
                                      CerrarError

#line default
#line hidden
#nullable disable
            ));
            __builder.AddMarkupContent(113, "\r\n                        ");
            __builder.AddMarkupContent(114, "<i class=\"large material-icons\">cancel</i>\r\n                    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(115, "\r\n                ");
            __builder.CloseElement();
            __builder.AddMarkupContent(116, "\r\n                ");
            __builder.OpenElement(117, "div");
            __builder.AddAttribute(118, "class", "modal-body text-center");
            __builder.AddMarkupContent(119, "\r\n                    ");
            __builder.AddMarkupContent(120, "<h4>Ooops!</h4>\r\n                    ");
            __builder.OpenElement(121, "p");
            __builder.AddContent(122, 
#nullable restore
#line 101 "C:\Users\AxelEduardo\Documents\Software learning\BlazorCursoUdemy\BlazorServer\Pages\ListaCursos.razor"
                        textoError

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(123, "\r\n                    ");
            __builder.OpenElement(124, "button");
            __builder.AddAttribute(125, "class", "btn btn-success");
            __builder.AddAttribute(126, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 102 "C:\Users\AxelEduardo\Documents\Software learning\BlazorCursoUdemy\BlazorServer\Pages\ListaCursos.razor"
                                                              CerrarError

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(127, "data-dismiss", "modal");
            __builder.AddContent(128, "Cerrar");
            __builder.CloseElement();
            __builder.AddMarkupContent(129, "\r\n                ");
            __builder.CloseElement();
            __builder.AddMarkupContent(130, "\r\n            ");
            __builder.CloseElement();
            __builder.AddMarkupContent(131, "\r\n        ");
            __builder.CloseElement();
            __builder.AddMarkupContent(132, "\r\n    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(133, "\r\n");
#nullable restore
#line 107 "C:\Users\AxelEduardo\Documents\Software learning\BlazorCursoUdemy\BlazorServer\Pages\ListaCursos.razor"
}

#line default
#line hidden
#nullable disable
        }
        #pragma warning restore 1998
#nullable restore
#line 112 "C:\Users\AxelEduardo\Documents\Software learning\BlazorCursoUdemy\BlazorServer\Pages\ListaCursos.razor"
       
    public List<Curso> listaCursos { get; set; } = new List<Curso>();
    public Boolean MostrarPopUP = false;
    public int idCursoBorrar = -1;

    Boolean mostrarError = false;
    String textoError = String.Empty;

    Login l = new Login();
    UsuarioAPI u = new UsuarioAPI();

    //Recordar que pasando -1 nos devolvia todos los cursos sin filtrar por alumno
    protected override async Task OnInitializedAsync()
    {
        try
        {
            l.Usuario = Environment.GetEnvironmentVariable("UsuarioAPI");
            l.Password = Environment.GetEnvironmentVariable("UsuarioAPI");
            u = (await SevicioLogin.SolicitudLogin(l));
            Environment.SetEnvironmentVariable("Token", u.Token);

            mostrarError = false;
            listaCursos = (await ServicioCurso.DameCursos(-1)).ToList();
        }
        catch (Exception ex)
        {
            MostrarError();
            textoError = ex.Message;
            StateHasChanged();

        }
    }

    protected void Borrar(int curso)
    {
        idCursoBorrar = curso;
        MostrarPopUP = true;
    }

    protected void CerrarPop()
    {
        MostrarPopUP = false;
    }

    protected async void DarDeBaja(int idCursoBorrar)
    {
        try
        {
            await ServicioCurso.BorrarCurso(idCursoBorrar);
            CerrarPop();
            navigationmanager.NavigateTo("listaCursos", true);
        }
        catch (Exception ex)
        {
            textoError = ex.Message;
            MostrarError();
            StateHasChanged();
        }
    }

    protected void CerrarError()
    {
        mostrarError = false;
        CerrarPop();
    }

    protected void MostrarError()
    {
        CerrarPop();
        mostrarError = true;
    }

#line default
#line hidden
#nullable disable
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IServicioLogin SevicioLogin { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private NavigationManager navigationmanager { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IServicioCursos ServicioCurso { get; set; }
    }
}
#pragma warning restore 1591
